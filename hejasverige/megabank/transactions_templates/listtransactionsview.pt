<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="hejasverige.megabank">

<body>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main">

    <div tal:replace="structure provider:plone.abovecontenttitle" />

    <h1 class="documentFirstHeading">Mitt konto</h1>

    <!--div tal:replace="structure provider:plone.belowcontenttitle" /-->
    
    <p class="documentDescription">Senast utförda transaktioner på mitt Heja Sverige konto</p>
    <p style="">Sidan hämtades <span tal:replace="view/now"/>
      <!--span tal:replace="python:DateTime().strftime('%Y/%m/%d')" /-->
    </p>

    <div tal:replace="structure provider:plone.abovecontentbody" />
    <!--div tal:define="liste python:here.portal_catalog.searchResults({'portal_type' : 'News Item',   'review_state':'published'});
                 Batch python:modules['Products.CMFPlone'].Batch;
                 b_size python:1;
                 b_start python:0;
                 b_start request/b_start | b_start;
                 batch python:Batch(liste, b_size, int(b_start), orphan=0);"
         tal:condition="liste">

        <ul>

            <tal:boucle tal:repeat="item batch">

                <div tal:content="item/pretty_title_or_id | nothing" />
            </tal:boucle>

        </ul>

        <div metal:use-macro="here/batch_macros/macros/navigation" />

    </div-->
    <tal:transactions condition="view/hasTransactions">
      <div tal:define="liste view/transactions;
                   Batch python:modules['Products.CMFPlone'].Batch;
                   b_size python:20;
                   b_start python:0;
                   b_start request/b_start | b_start;
                   batch python:Batch(liste, b_size, int(b_start), orphan=1);"
           tal:condition="liste">

          <table cellpadding="10" border="0">
              <thead>
                <th>Id</th>
                <th>&nbsp;&nbsp;</th>
                <th>Datum</th>
                <th>&nbsp;&nbsp;</th>
                <th>Tid</th>
                <th>&nbsp;&nbsp;</th>
                <th>Beskrivning</th>
                <th>&nbsp;&nbsp;</th>
                <th>Belopp</th>
                <th>&nbsp;&nbsp;</th>
                <th>&nbsp;&nbsp;</th>
              </thead>
              <tbody>
              <tal:boucle tal:repeat="item batch">
                  <tr cellpadding="10">
                    <td tal:content="item/ID | nothing" />
                    <td />
                    <td tal:define="td item/TransactionDate; td python:here.toLocalizedTime(td)" tal:content="string:$td" />
                    <td />
                    <td tal:define="time item/Created; time python:time.strftime('%H:%M:%S')" tal:content="string:$time" />
                    <td />
                    <td tal:content="item/Description | nothing" />
                    <td />
                    <td style="text-align: right;" tal:content="item/Amount | nothing" />
                    <td />
                  </tr>
              </tal:boucle>
              </tbody>
          </table>

          <div metal:use-macro="here/batch_macros/macros/navigation" />

      </div>
    </tal:transactions>
    <tal:transactions condition="not:view/hasTransactions">
      <div>No transactions found</div>
    </tal:transactions>    
    <div tal:replace="structure provider:plone.belowcontentbody" />

    </tal:main-macro>
</metal:main>

</body>
</html>